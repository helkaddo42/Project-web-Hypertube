{"ast":null,"code":"var _jsxFileName = \"/Users/hichamelkaddouri/Desktop/ok/src/Home/ListMovie/movieCard/MovieCard.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './movieCard.css';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport axios from 'axios';\n\nfunction MovieCard({\n  redirect,\n  idGenre,\n  search\n}) {\n  const [movie, setMovie] = useState([]);\n  const [pageMovie, setPageMovie] = useState(null); // partie montage\n\n  useEffect(() => {\n    axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=80293e0217053d0767442c692293745b&language=fr&page=1&include_adult=false`).then(response => {\n      const data = response.data.results.filter(movie => movie.poster_path !== null);\n      setMovie(data);\n      setPageMovie(response.data.page);\n    });\n  }, []); // partie incrementation de la page \n\n  useEffect(() => {\n    // console.log('page +1 ')\n    if (pageMovie > 1 && idGenre) {\n      // console.log('page filtre suivante')\n      axios.get(`https://api.themoviedb.org/3/discover/movie?api_key=80293e0217053d0767442c692293745b&language=fr&page=${pageMovie}&include_adult=false&with_genres=${idGenre}`).then(res => {\n        const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n        setMovie(movie => [...movie, ...nextMovie]);\n      });\n    } else if (pageMovie > 1 && search) {\n      // console.log('recherche film, page suivamte')\n      axios.get(`https://api.themoviedb.org/3/search/movie?api_key=80293e0217053d0767442c692293745b&language=en-US&query=${search}&page=${pageMovie}&include_adult=false`).then(res => {\n        const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n        setMovie(movie => [...movie, ...nextMovie]);\n      });\n    } else if (pageMovie > 1 && !search && !idGenre) {\n      // console.log('page popular suivamte')\n      axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=80293e0217053d0767442c692293745b&language=fr&page=${pageMovie}&include_adult=false`).then(res => {\n        const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n        setMovie(movie => [...movie, ...nextMovie]);\n      });\n    }\n  }, [pageMovie]);\n  useEffect(() => {\n    if (!!idGenre) {\n      // console.log('cliquer sur le filtre')\n      localStorage.setItem('genre', idGenre);\n      localStorage.setItem('page', pageMovie);\n      axios.get(`https://api.themoviedb.org/3/discover/movie?api_key=80293e0217053d0767442c692293745b&language=fr&page=1&include_adult=false&with_genres=${idGenre}`).then(res => {\n        const data = res.data.results.filter(movie => movie.poster_path !== null);\n        setMovie(data);\n      });\n    }\n  }, [idGenre]);\n  useEffect(() => {\n    if (!!search) {\n      console.log(search); // console.log('recherche de film')\n\n      axios.get(`https://api.themoviedb.org/3/search/movie?api_key=80293e0217053d0767442c692293745b&language=en-US&query=${search}&page=1&include_adult=false`).then(res => {\n        const data = res.data.results.filter(movie => movie.poster_path !== null);\n        setMovie(data);\n      });\n    }\n  }, [search]); // partie variable dynamique\n\n  const movieDetail = e => {\n    const id = e.target.id;\n    redirect.history.push(`/Movie/${id}`);\n  };\n\n  const poster = movie.map(element => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      className: \"cardMovie\",\n      key: element.id,\n      onClick: e => movieDetail(e),\n      alt: \"card\",\n      id: element.id,\n      src: `https://image.tmdb.org/t/p/w185` + element.poster_path,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 51\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(InfiniteScroll, {\n    dataLength: movie,\n    next: () => setPageMovie(pageMovie + 1),\n    hasMore: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 14\n    }\n  }, poster));\n}\n\nexport default MovieCard;","map":{"version":3,"sources":["/Users/hichamelkaddouri/Desktop/ok/src/Home/ListMovie/movieCard/MovieCard.jsx"],"names":["React","useState","useEffect","InfiniteScroll","axios","MovieCard","redirect","idGenre","search","movie","setMovie","pageMovie","setPageMovie","get","then","response","data","results","filter","poster_path","page","res","nextMovie","localStorage","setItem","console","log","movieDetail","e","id","target","history","push","poster","map","element"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAO,iBAAP;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,SAAT,CAAmB;AAACC,EAAAA,QAAD;AAAUC,EAAAA,OAAV;AAAkBC,EAAAA;AAAlB,CAAnB,EAA8C;AAG1C,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,CAAC,IAAD,CAA1C,CAJ0C,CAM1C;;AACAC,EAAAA,SAAS,CAAC,MAAM;AAERE,IAAAA,KAAK,CAACS,GAAN,CAAW,4HAAX,EACCC,IADD,CACOC,QAAD,IAAY;AACd,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsBC,MAAtB,CAA6BT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAA5D,CAAb;AACAT,MAAAA,QAAQ,CAACM,IAAD,CAAR;AACAJ,MAAAA,YAAY,CAACG,QAAQ,CAACC,IAAT,CAAcI,IAAf,CAAZ;AACH,KALD;AAMP,GARQ,EAQN,EARM,CAAT,CAP0C,CAiB1C;;AAEAlB,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,QAAGS,SAAS,GAAG,CAAZ,IAAiBJ,OAApB,EACA;AACI;AACAH,MAAAA,KAAK,CAACS,GAAN,CAAW,yGAAwGF,SAAU,oCAAmCJ,OAAQ,EAAxK,EAA2KO,IAA3K,CAAgLO,GAAG,IAAE;AACjL,cAAMC,SAAS,GAAGD,GAAG,CAACL,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,CAAwBT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAAvD,CAAlB;AACAT,QAAAA,QAAQ,CAAED,KAAK,IAAG,CAAC,GAAGA,KAAJ,EAAU,GAAGa,SAAb,CAAV,CAAR;AACH,OAHD;AAIH,KAPD,MAOM,IAAGX,SAAS,GAAG,CAAZ,IAAiBH,MAApB,EAA6B;AAC/B;AACAJ,MAAAA,KAAK,CAACS,GAAN,CAAW,2GAA0GL,MAAO,SAAQG,SAAU,sBAA9I,EAAqKG,IAArK,CAA0KO,GAAG,IAAE;AAC/K,cAAMC,SAAS,GAAGD,GAAG,CAACL,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,CAAwBT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAAvD,CAAlB;AACAT,QAAAA,QAAQ,CAAED,KAAK,IAAG,CAAC,GAAGA,KAAJ,EAAW,GAAGa,SAAd,CAAV,CAAR;AACF,OAHE;AAKH,KAPK,MAOA,IAAGX,SAAS,GAAG,CAAZ,IAAiB,CAACH,MAAlB,IAA4B,CAACD,OAAhC,EAAyC;AACvC;AACAH,MAAAA,KAAK,CAACS,GAAN,CAAW,wGAAuGF,SAAU,sBAA5H,EAAmJG,IAAnJ,CAAwJO,GAAG,IAAE;AAC7J,cAAMC,SAAS,GAAGD,GAAG,CAACL,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,CAAwBT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAAvD,CAAlB;AACAT,QAAAA,QAAQ,CAAED,KAAK,IAAG,CAAC,GAAGA,KAAJ,EAAU,GAAGa,SAAb,CAAV,CAAR;AACC,OAHD;AAIP;AAEH,GAxBO,EAwBL,CAACX,SAAD,CAxBK,CAAT;AAgCAT,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG,CAAC,CAACK,OAAL,EAAc;AACN;AACAgB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BjB,OAA7B;AACAgB,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA4Bb,SAA5B;AACAP,MAAAA,KAAK,CAACS,GAAN,CAAW,2IAA0IN,OAAQ,EAA7J,EAAgKO,IAAhK,CAAqKO,GAAG,IAAE;AACtK,cAAML,IAAI,GAAGK,GAAG,CAACL,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,CAAwBT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAAvD,CAAb;AACAT,QAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,OAHD;AAIH;AAER,GAXQ,EAWN,CAACT,OAAD,CAXM,CAAT;AAaAL,EAAAA,SAAS,CAAC,MAAM;AACX,QAAG,CAAC,CAACM,MAAL,EAAY;AACRiB,MAAAA,OAAO,CAACC,GAAR,CAAYlB,MAAZ,EADQ,CAET;;AACAJ,MAAAA,KAAK,CAACS,GAAN,CAAW,2GAA0GL,MAAO,6BAA5H,EAA0JM,IAA1J,CAA+JO,GAAG,IAAE;AAChK,cAAML,IAAI,GAAGK,GAAG,CAACL,IAAJ,CAASC,OAAT,CAAiBC,MAAjB,CAAwBT,KAAK,IAAIA,KAAK,CAACU,WAAN,KAAsB,IAAvD,CAAb;AACAT,QAAAA,QAAQ,CAACM,IAAD,CAAR;AACH,OAHD;AAIH;AACJ,GATQ,EASN,CAACR,MAAD,CATM,CAAT,CAhE0C,CAgF1C;;AACA,QAAMmB,WAAW,GAAGC,CAAD,IAAK;AACpB,UAAMC,EAAE,GAAGD,CAAC,CAACE,MAAF,CAASD,EAApB;AACAvB,IAAAA,QAAQ,CAACyB,OAAT,CAAiBC,IAAjB,CAAuB,UAASH,EAAG,EAAnC;AACH,GAHD;;AAOA,QAAMI,MAAM,GAAGxB,KAAK,CAACyB,GAAN,CAAWC,OAAD,IAAY;AAAE,wBAAO;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,GAAG,EAAEA,OAAO,CAACN,EAAxC;AAA4C,MAAA,OAAO,EAAED,CAAC,IAAED,WAAW,CAACC,CAAD,CAAnE;AAA0E,MAAA,GAAG,EAAC,MAA9E;AAAqF,MAAA,EAAE,EAAEO,OAAO,CAACN,EAAjG;AAAqG,MAAA,GAAG,EAAG,iCAAD,GAAkCM,OAAO,CAAChB,WAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAAgL,GAAxM,CAAf;AAEA,sBAGI,oBAAC,cAAD;AACA,IAAA,UAAU,EAAEV,KADZ;AAEA,IAAA,IAAI,EAAE,MAAIG,YAAY,CAACD,SAAS,GAAG,CAAb,CAFtB;AAGA,IAAA,OAAO,EAAE,IAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKK;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACAsB,MADA,CALL,CAHJ;AAeH;;AAED,eAAe5B,SAAf","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport './movieCard.css'\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport axios from 'axios'\n\nfunction MovieCard({redirect,idGenre,search}) {\n\n    \n    const [movie, setMovie] = useState([])\n    const [pageMovie, setPageMovie] = useState(null)\n\n    // partie montage\n    useEffect(() => {\n       \n            axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=80293e0217053d0767442c692293745b&language=fr&page=1&include_adult=false`)\n            .then((response)=>{\n                const data = response.data.results.filter(movie => movie.poster_path !== null);\n                setMovie(data)\n                setPageMovie(response.data.page)\n            })\n    }, [])\n\n    // partie incrementation de la page \n\n    useEffect(() => {\n        // console.log('page +1 ')\n        if(pageMovie > 1 && idGenre )\n        {\n            // console.log('page filtre suivante')\n            axios.get(`https://api.themoviedb.org/3/discover/movie?api_key=80293e0217053d0767442c692293745b&language=fr&page=${pageMovie}&include_adult=false&with_genres=${idGenre}`).then(res=>{\n                const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n                setMovie( movie =>[...movie,...nextMovie])\n            })\n        }else if(pageMovie > 1 && search  ){\n            // console.log('recherche film, page suivamte')\n            axios.get(`https://api.themoviedb.org/3/search/movie?api_key=80293e0217053d0767442c692293745b&language=en-US&query=${search}&page=${pageMovie}&include_adult=false`).then(res=>{\n            const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n            setMovie( movie =>[...movie, ...nextMovie])\n         })\n        \n        }else if(pageMovie > 1 && !search && !idGenre ){\n                // console.log('page popular suivamte')\n                axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=80293e0217053d0767442c692293745b&language=fr&page=${pageMovie}&include_adult=false`).then(res=>{\n                const nextMovie = res.data.results.filter(movie => movie.poster_path !== null);\n                setMovie( movie =>[...movie,...nextMovie])\n                })\n        }\n\n     }, [pageMovie])\n\n     \n\n\n\n\n\n    useEffect(() => {\n        if(!!idGenre ){ \n                // console.log('cliquer sur le filtre')\n                localStorage.setItem('genre',idGenre)\n                localStorage.setItem('page',pageMovie)\n                axios.get(`https://api.themoviedb.org/3/discover/movie?api_key=80293e0217053d0767442c692293745b&language=fr&page=1&include_adult=false&with_genres=${idGenre}`).then(res=>{\n                    const data = res.data.results.filter(movie => movie.poster_path !== null);\n                    setMovie(data)\n                })\n            }\n      \n    }, [idGenre])\n\n    useEffect(() => {\n         if(!!search){\n             console.log(search)\n            // console.log('recherche de film')\n            axios.get(`https://api.themoviedb.org/3/search/movie?api_key=80293e0217053d0767442c692293745b&language=en-US&query=${search}&page=1&include_adult=false`).then(res=>{\n                const data = res.data.results.filter(movie => movie.poster_path !== null);\n                setMovie(data)\n            })\n        }\n    }, [search])\n\n\n\n\n\n\n    // partie variable dynamique\n    const movieDetail =(e)=>{\n        const id = e.target.id\n        redirect.history.push(`/Movie/${id}`)\n    }\n\n    \n\n    const poster=  movie.map((element) =>{ return <img className='cardMovie' key={element.id} onClick={e=>movieDetail(e)}   alt='card' id={element.id} src={`https://image.tmdb.org/t/p/w185`+element.poster_path}></img> })\n\n    return (\n   \n\n        <InfiniteScroll\n        dataLength={movie} \n        next={()=>setPageMovie(pageMovie + 1)}\n        hasMore={true} \n        >\n             <div className='mainCard'>\n            {poster}\n            </div>\n        \n        </InfiniteScroll>\n        \n    )\n}\n\nexport default MovieCard\n\n"]},"metadata":{},"sourceType":"module"}